# 🧪 单词抄写PDF生成器 - 测试用例集

## 📋 测试概览

本文档包含完整的测试用例集，用于确保应用的所有功能正常工作。

## 🔧 单元测试

### 1. DOM元素测试
- **测试目标**: 验证所有必需的DOM元素存在
- **测试步骤**: 
  1. 检查 `word-source` 元素
  2. 检查 `word-list` 元素  
  3. 检查 `font-style` 元素
  4. 检查 `generate-pdf` 按钮
- **预期结果**: 所有元素都存在且可访问

### 2. 字体配置测试
- **测试目标**: 验证字体配置对象正确性
- **测试数据**: 
  ```javascript
  {
    'Helvetica': { name: 'Helvetica', type: 'normal' },
    'cursive-standard': { name: 'Times', type: 'italic', letterSpacing: 2 }
  }
  ```
- **预期结果**: 配置对象包含所有必需属性

### 3. 单词处理测试
- **测试目标**: 验证单词列表处理逻辑
- **测试数据**: `"apple\nbanana\ncherry\n\n  \ndog"`
- **预期结果**: 过滤空行，返回4个有效单词

### 4. 本地存储测试
- **测试目标**: 验证localStorage读写功能
- **测试步骤**: 保存设置 → 读取设置 → 清理数据
- **预期结果**: 数据正确保存和读取

### 5. 数值验证测试
- **测试目标**: 验证输入参数范围检查
- **测试范围**:
  - 重复次数: 1-20
  - 字体大小: 10-30
  - 行间距: 30-80
  - 每页行数: 5-20

## 🔗 集成测试

### 1. 字体切换流程测试
- **测试目标**: 验证字体切换完整流程
- **测试步骤**:
  1. 选择字体样式
  2. 触发change事件
  3. 验证设置保存
  4. 检查预览更新
- **预期结果**: 字体切换生效，设置持久化

### 2. 词库管理流程测试
- **测试目标**: 验证词库CRUD操作
- **测试步骤**:
  1. 创建自定义词库
  2. 编辑词库内容
  3. 删除词库
  4. 切换词库选择
- **预期结果**: 所有操作正常，数据一致

### 3. PDF生成流程测试
- **测试目标**: 验证PDF生成完整流程
- **测试步骤**:
  1. 设置单词列表
  2. 配置生成参数
  3. 选择字体样式
  4. 生成PDF
- **预期结果**: PDF成功生成，无JavaScript错误

### 4. 打印设置流程测试
- **测试目标**: 验证打印设置功能
- **测试步骤**:
  1. 设置页面方向
  2. 调整边距
  3. 配置页眉页码
  4. 应用设置
- **预期结果**: 设置正确应用到PDF

## 📱 兼容性测试

### 1. 浏览器兼容性
- **Chrome** (推荐): 完整功能支持
- **Firefox**: 核心功能支持
- **Safari**: 基本功能支持
- **Edge**: 完整功能支持

### 2. 设备兼容性
- **桌面端**: 完整功能
- **平板**: 响应式布局
- **手机**: 基本功能

## 🚀 性能测试

### 1. 大量单词处理
- **测试数据**: 1000个单词
- **性能目标**: 处理时间 < 100ms
- **内存限制**: 不超过50MB

### 2. PDF生成性能
- **测试场景**: 100个单词，5次重复
- **性能目标**: 生成时间 < 3秒
- **文件大小**: 不超过2MB

## 🎯 功能测试用例

### 测试用例 1: 基本PDF生成
```
前提条件: 应用已加载
测试步骤:
1. 在单词列表中输入: "hello\nworld\ntest"
2. 设置重复次数为3
3. 选择标准印刷体
4. 点击生成PDF
预期结果: 成功下载包含3个单词的PDF文件
```

### 测试用例 2: 手写体字体测试
```
前提条件: 应用已加载
测试步骤:
1. 选择"标准手写体 (D'Nealian)"
2. 输入单词: "beautiful"
3. 生成PDF
预期结果: PDF中显示斜体字体，有字母间距
```

### 测试用例 3: 自定义词库测试
```
前提条件: 应用已加载
测试步骤:
1. 点击"字库管理"
2. 创建新词库"我的测试词库"
3. 添加单词: "apple\nbanana\ncherry"
4. 保存词库
5. 在主页面选择该词库
6. 生成PDF
预期结果: 成功创建词库并生成对应PDF
```

### 测试用例 4: 四线格标准测试
```
前提条件: 应用已加载
测试步骤:
1. 选择"标准四线格（英文手写标准）"线条样式
2. 输入混合字母单词: "big jump happy"
3. 设置字体大小为22pt
4. 生成PDF
预期结果: 
- 小写字母主体（如a,e,i）占腰线到基线
- 上伸字母（如b,d,h）延伸到顶线
- 下伸字母（如g,j,p）延伸到底线
- 四条线清晰可见，粗细不同
```

### 测试用例 5: 打印设置测试
```
前提条件: 应用已加载
测试步骤:
1. 点击"打印设置"
2. 切换为横向页面
3. 设置页眉为"单词练习册"
4. 启用页码显示
5. 应用设置并生成PDF
预期结果: PDF为横向布局，包含页眉和页码
```

### 测试用例 6: 错误处理测试
```
前提条件: 应用已加载
测试步骤:
1. 清空单词列表
2. 点击生成PDF
预期结果: 显示错误提示"请输入至少一个单词！"
```

## 🐛 回归测试

### 已修复问题验证
1. **字体切换不生效**: 验证字体选择器变化立即生效
2. **元素缺失错误**: 验证所有事件监听器安全绑定
3. **jsPDF API错误**: 验证使用正确的字体设置API

## 📊 测试报告模板

```
测试执行日期: ___________
测试人员: ___________
测试环境: ___________

单元测试结果:
- 通过: ___/___
- 失败: ___/___

集成测试结果:
- 通过: ___/___
- 失败: ___/___

主要问题:
1. ________________
2. ________________

改进建议:
1. ________________
2. ________________
```

## 🎯 自动化测试执行

1. 打开 `test.html` 文件
2. 点击"🚀 运行所有测试"
3. 查看测试结果统计
4. 检查失败的测试项
5. 记录测试报告

## 📝 测试最佳实践

1. **每次提交前运行测试**: 确保没有回归问题
2. **测试边界条件**: 空输入、最大值、最小值
3. **跨浏览器测试**: 至少在Chrome和Firefox中测试
4. **性能监控**: 关注大量数据的处理性能
5. **用户体验测试**: 确保错误信息友好且有帮助